# node.JS

Node.js 中的 JavaScript

- 没有 BOM、DOM
- 在 Node 中为 JavaScript 提供了一些服务器级别的 API
  - 文件操作的能力
  - http 服务的能力

## 模块

require (加载模块)

- 加载文件模块并执行代码
- 拿到被加载文件模块导出的接口对象

exports（导出模块）

- exports默认是空对象

## 核心模块

在 Node 中没有全局作用域的概念

1. ### 加载文件系统


```
var fs =require('fs')
//fs => filesystem /文件系统 
//fs核心模块 提供api
```

### 2.读取文件

参数一:url

参数二:回调函数

​             参数1:error //错误对象，如果读取成功error=null

​             参数2:data //读取到的数据

```
fs.readFile('',function(){})
```

### 3.写文件

参数一：地址

参数二:数据

参数三:回调函数

​             参数1:error //错误对象，如果读取成功error=null

```
var fs =require('fs')

fs.writeFile('./a.txt','hello world',(error)=>{
    console.log( error);
}  )
```

### 4.http

1.引入模块

```
var http=require('http')
```

2.创建实例

```
var server=http.createServer()//创建实例
```

3.启动服务器

```
server.listen(8080,function () {
    console.log('    服务器启动成功，http://127.0.0.1：8080  ');
})//启动服务器
```

4.请求对象（request）

```
server.on('request',function (request,response) {
}
```

- request.url  //请求地址

5.响应对象（response）

- response.write  //响应写入东西

- response不能传对象，需要用JSON.stringify(obj)//将对象转换成字符串，
- JSON.parse(str)将字符串转换成对象
- 响应必须用response.end()结束

6.设置content-type

- 不同的资源对应的 Content-Type 是不一样，具体参照：http://tool.oschina.net/commons

```
response.setHeader('Content-Type','text/plain;charset=utf-8')
```







代码

```
var http=require('http')

var server=http.createServer()//创建实例

server.listen(8080,function () {
    console.log('    服务器启动成功，http://127.0.0.1：8080  ');
})//启动服务器

server.on('request',function (request,response) {
    console.log(request.url);//访问的url
    let a ={
        a:1,
        b:2
    }

    if(request.url==='/'){
        response.end(JSON.stringify(a))//响应必须用end结束
        console.log(a);
    }else{
console.log('1')
    }
    
})//接受请求
```

