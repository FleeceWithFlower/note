(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{210:function(t,a,e){"use strict";e.r(a);var s=e(0),r=Object(s.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),e("ul",[e("li",[t._v("Vuex是Vue.js应用程序的"),e("strong",[t._v("状态管理模式+库")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm i vuex\n")])])]),e("h2",{attrs:{id:"引用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引用","aria-hidden":"true"}},[t._v("#")]),t._v(" 引用")]),t._v(" "),e("ul",[e("li",[t._v("与模块系统一起使用时，必须通过"),e("code",[t._v("Vue.use()")]),t._v("以下方式显式安装Vuex ：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import Vue from 'vue'\nimport Vuex from 'vuex'\nVue.use(Vuex)\n")])])]),e("h2",{attrs:{id:"引库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引库","aria-hidden":"true"}},[t._v("#")]),t._v(" 引库")]),t._v(" "),e("h2",{attrs:{id:"引入商店"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引入商店","aria-hidden":"true"}},[t._v("#")]),t._v(" 引入商店")]),t._v(" "),e("ul",[e("li",[t._v("可使用计算属性引入")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" computed: {\n    count () {\n      return store.state.count\n    }\n")])])]),e("h2",{attrs:{id:"组件引入商店"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组件引入商店","aria-hidden":"true"}},[t._v("#")]),t._v(" 组件引入商店")]),t._v(" "),e("h2",{attrs:{id:"this-store"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#this-store","aria-hidden":"true"}},[t._v("#")]),t._v(" this.$store")]),t._v(" "),e("ul",[e("li",[t._v("适用所有子组件")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('const app = new Vue({\n  el: \'#app\',\n  // provide the store using the "store" option.\n  // this will inject the store instance to all child components.\n  store,\n  components: { Counter },\n  template: `\n    <div class="app">\n      <counter></counter>\n    </div>\n  `\n})\n')])])]),e("h3",{attrs:{id:"store"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#store","aria-hidden":"true"}},[t._v("#")]),t._v(" store")]),t._v(" "),e("h3",{attrs:{id:"state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#state","aria-hidden":"true"}},[t._v("#")]),t._v(" state")]),t._v(" "),e("h3",{attrs:{id:"mapstate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mapstate","aria-hidden":"true"}},[t._v("#")]),t._v(" mapState")]),t._v(" "),e("ul",[e("li",[t._v("解决 当组件需要使用多个存储状态属性或getter时，声明所有这些计算属性可能会重复且冗长。")])]),t._v(" "),e("h3",{attrs:{id:"用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法","aria-hidden":"true"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),e("ul",[e("li",[t._v("实例中参数为Object， key=>value"),e("code",[t._v("<function>")]),t._v(" "),e("ul",[e("li",[t._v("value"),e("code",[t._v("<funtion>")]),t._v(" "),e("ul",[e("li",[t._v("参数\n"),e("ul",[e("li",[t._v("state")])])])])])])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("{\n     count: state => state.count\n}\n")])])]),e("ul",[e("li",[t._v("实例中参数为Object， key=>value"),e("code",[t._v("<function>")]),t._v(" "),e("ul",[e("li",[t._v("ES6 简写")])])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" count (state) {\n                return state.count + this.localCount\n            }\n")])])]),e("ul",[e("li",[t._v("实例中参数为Object， key=>value"),e("code",[t._v("<string>")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("{\ncountAlias: 'count',\n}\n")])])]),e("ul",[e("li",[t._v("实例中参数为Array， "),e("code",[t._v("<string>")]),t._v(" "),e("ul",[e("li",[t._v("this."),e("code",[t._v("<value>")]),t._v("和state."),e("code",[t._v("<value>")]),t._v("相同时，可如下简写")])])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[\n  // map this.count to store.state.count\n  'count'\n]\n")])])]),e("h3",{attrs:{id:"与其他本地计算属性结合使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#与其他本地计算属性结合使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 与其他本地计算属性结合使用")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("computed: {\n  localComputed () { /* ... */ },\n  // mix this into the outer object with the object spread operator\n  ...mapState({\n    // ...\n  })\n}\n")])])]),e("h3",{attrs:{id:"getter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getter","aria-hidden":"true"}},[t._v("#")]),t._v(" Getter")]),t._v(" "),e("ul",[e("li",[t._v("接受 state 作为其第一个参数")]),t._v(" "),e("li",[t._v("接受其他 getter 作为第二个参数")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("const store = new Vuex.Store({\n  state: {\n    todos: [\n      { id: 1, text: '...', done: true },\n      { id: 2, text: '...', done: false }\n    ]\n  },\n  getters: {\n    doneTodos: state => {\n      return state.todos.filter(todo => todo.done)\n    }\n     doneTodosCount: (state, getters) => {\n    return getters.doneTodos.length\n  }\n  }\n})\n")])])]),e("h4",{attrs:{id:"store-getters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#store-getters","aria-hidden":"true"}},[t._v("#")]),t._v(" store.getters")]),t._v(" "),e("ul",[e("li",[t._v("通过属性访问")])]),t._v(" "),e("h3",{attrs:{id:"mapgetters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mapgetters","aria-hidden":"true"}},[t._v("#")]),t._v(" mapGetters")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" ...mapGetters([\n      'doneTodosCount',\n      'anotherGetter',\n      // ...\n    ])\n")])])]),e("ul",[e("li",[t._v("getter 属性另取一个名字，使用对象形式")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mapGetters({\n  // 把 `this.doneCount` 映射为 `this.$store.getters.doneTodosCount`\n  doneCount: 'doneTodosCount'\n})\n")])])]),e("h3",{attrs:{id:"mutation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mutation","aria-hidden":"true"}},[t._v("#")]),t._v(" Mutation")]),t._v(" "),e("ul",[e("li",[t._v("更改 Vuex 的 store 中的状态的唯一方法是提交 mutation。")]),t._v(" "),e("li",[t._v("每个 mutation 都有一个字符串的 "),e("strong",[t._v("事件类型 (type)")]),t._v(" 和 一个 "),e("strong",[t._v("回调函数 (handler)")])]),t._v(" "),e("li",[t._v("Mutation 必须是同步函数")])]),t._v(" "),e("p",[t._v("store.commit")]),t._v(" "),e("ul",[e("li",[t._v("需要以相应的 type 调用 "),e("strong",[t._v("store.commit")]),t._v(" 方法")]),t._v(" "),e("li",[e("code",[t._v("store.commit")]),t._v(" 传入额外的参数，即 mutation 的 "),e("strong",[t._v("载荷（payload）")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mutations: {\n  increment (state, n) {\n    state.count += n\n  }\n}\n")])])]),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("ul",[e("li",[t._v("对象风格的提交方式\n"),e("ul",[e("li",[t._v("提交 mutation 的另一种方式是直接使用包含 "),e("code",[t._v("type")]),t._v(" 属性的对象：")])])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("store.commit({\n  type: 'increment',\n  amount: 10\n})\n")])])]),e("h3",{attrs:{id:"mapmutations"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mapmutations","aria-hidden":"true"}},[t._v("#")]),t._v(" mapMutations")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("  methods: {\n    ...mapMutations([\n      'increment'])\n  }\n//将 `this.increment()` 映射为 `this.$store.commit('increment')`\n")])])]),e("h4",{attrs:{id:"action"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#action","aria-hidden":"true"}},[t._v("#")]),t._v(" Action")]),t._v(" "),e("ul",[e("li",[t._v("Action 提交的是 mutation，而不是直接变更状态。")]),t._v(" "),e("li",[t._v("Action 可以包含任意异步操作。")])]),t._v(" "),e("h3",{attrs:{id:"context"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#context","aria-hidden":"true"}},[t._v("#")]),t._v(" context")]),t._v(" "),e("ul",[e("li",[t._v("与 store 实例具有相同方法和属性")])]),t._v(" "),e("h3",{attrs:{id:"store-dispatch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#store-dispatch","aria-hidden":"true"}},[t._v("#")]),t._v(" store.dispatch")]),t._v(" "),e("ul",[e("li",[t._v("触发Action\n"),e("ul",[e("li",[t._v("store.dispatch 返回promise，将action 返回 promise，store.dispatch后可接then()")])])])]),t._v(" "),e("h3",{attrs:{id:"payload"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#payload","aria-hidden":"true"}},[t._v("#")]),t._v(" payload")]),t._v(" "),e("ul",[e("li",[t._v("以载荷形式分发")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("store.dispatch('incrementAsync', {\n  amount: 10\n})\n")])])]),e("ul",[e("li",[t._v("以对象形式分发")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("store.dispatch({\n  type: 'incrementAsync',\n  amount: 10\n})\n")])])]),e("h3",{attrs:{id:"mapactions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mapactions","aria-hidden":"true"}},[t._v("#")]),t._v(" mapActions")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("mapActions")]),t._v(" 辅助函数将组件的 methods 映射为 "),e("code",[t._v("store.dispatch")]),t._v(" 调用")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" ...mapActions([\n      'increment'\n    ]),\n")])])]),e("h3",{attrs:{id:"module"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#module","aria-hidden":"true"}},[t._v("#")]),t._v(" Module")]),t._v(" "),e("ul",[e("li",[t._v("Vuex 允许我们将 store 分割成"),e("strong",[t._v("模块（module）")])]),t._v(" "),e("li",[t._v("每个模块可以嵌套子模块")])]),t._v(" "),e("h3",{attrs:{id:"state-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#state-2","aria-hidden":"true"}},[t._v("#")]),t._v(" state")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("this.$store.state.<module>.<value>\n")])])]),e("h3",{attrs:{id:"getter-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getter-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Getter")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("this.$store.getters['<mudule>/<getter>']\n")])])]),e("ul",[e("li",[t._v("参数\n"),e("ul",[e("li",[t._v("state("),e("strong",[t._v("模块的局部状态对象")]),t._v(")")]),t._v(" "),e("li",[t._v("getters")]),t._v(" "),e("li",[t._v("rootState")]),t._v(" "),e("li",[t._v("rootGetter")])])])]),t._v(" "),e("h5",{attrs:{id:"mutations"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mutations","aria-hidden":"true"}},[t._v("#")]),t._v(" mutations")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("this.$store.commit['<mudule>/<mutation>']\n")])])]),e("ul",[e("li",[t._v("参数\n"),e("ul",[e("li",[t._v("state("),e("strong",[t._v("模块的局部状态对象")]),t._v(")")]),t._v(" "),e("li",[t._v("payload")])])])]),t._v(" "),e("h5",{attrs:{id:"action-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#action-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Action")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("this.$store.dispatch['<mudule>/<action>']\n")])])]),e("ul",[e("li",[e("p",[t._v("参数")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("context")]),t._v(" "),e("ul",[e("li",[t._v("context.state")]),t._v(" "),e("li",[t._v("context.rootState（根节点状态）")]),t._v(" "),e("li",[t._v("getters")]),t._v(" "),e("li",[t._v("rootGetters")])])]),t._v(" "),e("li",[e("p",[t._v("payload")])])])]),t._v(" "),e("li",[e("p",[t._v("dispatch 和 commit 被局部化了")])]),t._v(" "),e("li",[e("p",[t._v("他们可以接受 "),e("code",[t._v("root")]),t._v(" 属性以访问根 dispatch 或 commit")])])]),t._v(" "),e("h4",{attrs:{id:"严格模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#严格模式","aria-hidden":"true"}},[t._v("#")]),t._v(" 严格模式")]),t._v(" "),e("ul",[e("li",[t._v("在严格模式下，无论何时发生了状态变更且不是由 mutation 函数引起的，将会抛出错误。")]),t._v(" "),e("li",[t._v("发布环境下关闭严格模式，以避免性能损失。")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("const store = new Vuex.Store({\n  // ...\n  strict: true\n})\n")])])]),e("h4",{attrs:{id:"表单处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#表单处理","aria-hidden":"true"}},[t._v("#")]),t._v(" 表单处理")]),t._v(" "),e("ul",[e("li",[t._v("不使用v-model,v-bind 绑定value,配合input事件")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("computed: {\n  ...mapState({\n    message: state => state.obj.message\n  })\n},\nmethods: {\n  updateMessage (e) {\n    this.$store.commit('updateMessage', e.target.value)\n  }\n}\n")])])]),e("ul",[e("li",[t._v("使用v-model,配合computed-set、get")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("computed: {\n  message: {\n    get () {\n      return this.$store.state.obj.message\n    },\n    set (value) {\n      this.$store.commit('updateMessage', value)\n    }\n  }\n}\n")])])]),e("h4",{attrs:{id:"插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#插件","aria-hidden":"true"}},[t._v("#")]),t._v(" 插件")]),t._v(" "),e("h4",{attrs:{id:"测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试","aria-hidden":"true"}},[t._v("#")]),t._v(" 测试")]),t._v(" "),e("h4",{attrs:{id:"热重载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#热重载","aria-hidden":"true"}},[t._v("#")]),t._v(" 热重载")])])},[],!1,null,null,null);a.default=r.exports}}]);