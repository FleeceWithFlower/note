(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{228:function(e,a,t){"use strict";t.r(a);var v=t(0),r=Object(v.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"mongoose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongoose","aria-hidden":"true"}},[e._v("#")]),e._v(" Mongoose")]),e._v(" "),t("h2",{attrs:{id:"schema"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#schema","aria-hidden":"true"}},[e._v("#")]),e._v(" Schema")]),e._v(" "),t("p",[e._v("Mongoose 的一切始于 Schema。每个 schema 都会映射到一个 MongoDB collection ，并定义这个collection里的文档的构成。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("  var mongoose = require('mongoose');\n  var Schema = mongoose.Schema;\n  var blogSchema = new Schema({\n    title:  String\n  });\n")])])]),t("h2",{attrs:{id:"model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#model","aria-hidden":"true"}},[e._v("#")]),e._v(" model")]),e._v(" "),t("p",[t("a",{attrs:{href:"http://www.mongoosejs.net/docs/api.html#model-js",target:"_blank",rel:"noopener noreferrer"}},[e._v("Models"),t("OutboundLink")],1),e._v(" 是从 "),t("code",[e._v("Schema")]),e._v(" 编译来的构造函数。 它们的实例就代表着可以从数据库保存和读取的 "),t("a",{attrs:{href:"http://www.mongoosejs.net/docs/documents.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("documents"),t("OutboundLink")],1),e._v("。 从数据库创建和读取 document 的所有操作都是通过 model 进行的")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var schema = new mongoose.Schema({ name: 'string', size: 'string' });\nvar Tank = mongoose.model('Tank', schema);\n")])])]),t("h2",{attrs:{id:"documents"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#documents","aria-hidden":"true"}},[e._v("#")]),e._v(" Documents")]),e._v(" "),t("p",[e._v("Documents 是 "),t("code",[e._v("model")]),e._v(" 的实例")]),e._v(" "),t("h2",{attrs:{id:"package"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#package","aria-hidden":"true"}},[e._v("#")]),e._v(" package")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("dotenv")]),e._v(" "),t("p",[e._v("配置环境变量")])]),e._v(" "),t("li"),e._v(" "),t("li")]),e._v(" "),t("h2",{attrs:{id:"关键字"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关键字","aria-hidden":"true"}},[e._v("#")]),e._v(" 关键字")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Schema")]),e._v(" "),t("p",[t("strong",[e._v("用于定义文档结构")])])]),e._v(" "),t("li",[t("p",[e._v("model")]),e._v(" "),t("p",[e._v("**用于创建 "),t("code",[e._v("Documents")]),e._v(" **")])]),e._v(" "),t("li",[t("p",[e._v("Documents")]),e._v(" "),t("p",[t("strong",[e._v("用于操作数据库")])])]),e._v(" "),t("li",[t("p",[e._v("Schema.prototype.set()")]),e._v(" "),t("p",[e._v("读/写 schema 的一个选项。")])]),e._v(" "),t("li",[t("p",[e._v("Schema.prototype.get()")]),e._v(" "),t("p",[e._v("读取 schema 的一个选项。")])])]),e._v(" "),t("h3",{attrs:{id:"validators"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validators","aria-hidden":"true"}},[e._v("#")]),e._v(" Validators")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Numbers.min")]),e._v(" "),t("p",[e._v("最小值")])]),e._v(" "),t("li",[t("p",[e._v("Numbers.mix")]),e._v(" "),t("p",[e._v("最大值")])]),e._v(" "),t("li",[t("p",[e._v("Strings.enum")]),e._v(" "),t("p",[e._v("枚举")])]),e._v(" "),t("li",[t("p",[e._v("Strings.match")]),e._v(" "),t("p",[e._v("正则")])]),e._v(" "),t("li",[t("p",[e._v("Strings.maxlength")]),e._v(" "),t("p",[e._v("最大字符长度")])]),e._v(" "),t("li",[t("p",[e._v("Strings.minlength")]),e._v(" "),t("p",[e._v("最字符长度")])]),e._v(" "),t("li",[t("p",[e._v("自定义")]),e._v(" "),t("p",[e._v("验证是一个"),t("a",{attrs:{href:"http://www.mongoosejs.net/docs/middleware.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中间件"),t("OutboundLink")],1),e._v("。它默认作为 pre('save')` 钩子注册在 schema 上")])])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("        validate: {\n          validator: function(v) {\n            return /\\d{3}-\\d{3}-\\d{4}/.test(v);\n          },\n          message: '{VALUE} is not a valid phone number!'\n        },\n")])])]),t("h3",{attrs:{id:"models"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#models","aria-hidden":"true"}},[e._v("#")]),e._v(" Models")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Model.find()")]),e._v(" "),t("p",[e._v("查询文档")])]),e._v(" "),t("li",[t("p",[e._v("Model.findById()")]),e._v(" "),t("p",[e._v("通过 ID\t查询文档")])]),e._v(" "),t("li",[t("p",[e._v("Model.findOne()")]),e._v(" "),t("p",[e._v("返回一个 匹配的 文档")])]),e._v(" "),t("li",[t("p",[e._v("Model.findOneAndUpdate()")]),e._v(" "),t("p",[e._v("返回一个 匹配的 文档并更新")])]),e._v(" "),t("li",[t("p",[e._v("Model.findByIdAndUpdate()")]),e._v(" "),t("p",[e._v("通过ID 返回 文档并更新")])]),e._v(" "),t("li",[t("p",[e._v("Model.remove()")]),e._v(" "),t("p",[e._v("删除所有匹配的文档")])]),e._v(" "),t("li",[t("p",[e._v("Model.findOneAndRemove()")]),e._v(" "),t("p",[e._v("返回一个 匹配的 文档并删除")])]),e._v(" "),t("li",[t("p",[e._v("Model.findByIdAndRemove()")]),e._v(" "),t("p",[e._v("通过ID 返回 文档并删除")])])]),e._v(" "),t("h3",{attrs:{id:"query"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#query","aria-hidden":"true"}},[e._v("#")]),e._v(" Query")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Query.prototype.select()")]),e._v(" "),t("p",[e._v("指定返回结果 包含或排除 字段")])]),e._v(" "),t("li",[t("p",[e._v("Query.prototype.exec()")]),e._v(" "),t("p",[e._v("执行查询")])])]),e._v(" "),t("h3",{attrs:{id:"populate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#populate","aria-hidden":"true"}},[e._v("#")]),e._v(" Populate")]),e._v(" "),t("p",[e._v("可以让你在别的 collection 中引用 document")])])},[],!1,null,null,null);a.default=r.exports}}]);