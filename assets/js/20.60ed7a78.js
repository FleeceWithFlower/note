(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{205:function(t,e,a){"use strict";a.r(e);var r=a(0),s=Object(r.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"cli（脚手架）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cli（脚手架）","aria-hidden":"true"}},[t._v("#")]),t._v(" Cli（脚手架）")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npx create-react-app my-app\n")])])]),a("h2",{attrs:{id:"自定义配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 自定义配置")]),t._v(" "),a("p",[t._v("安装")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm i react\nnpm i react-dom\n")])])]),a("p",[t._v("jsx安装")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm i @babel/core -D\nnpm i babel-loader -D\nnpm i @babel/plugin-transform-runtime -D\nnpm i @babel/preset-env -D\nnpm i @babel/preset-react -D\n")])])]),a("p",[t._v(".babelrc")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "presets": ["@babel/preset-react","@babel/preset-env"],\n  "plugins":["@babel/plugin-transform-runtime"]\n}\n')])])]),a("p",[t._v("webbpack.config.js")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const config ={\nmodule: {\n        rules: [\n            {\n                test: /\\.js|jsx$/,\n                use:'babel-loader',\n                exclude: /node_modules/\n            }\n        ]\n    }\n}\n")])])]),a("h2",{attrs:{id:"组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 组件")]),t._v(" "),a("ul",[a("li",[t._v("函数定义组件")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("//开头字母大写\nfunction MyComponent(){\n\treturn <div>我是组件1</div>\n}\n")])])]),a("ul",[a("li",[a("p",[t._v("class定义组件")]),t._v(" "),a("blockquote",[a("p",[t._v("与函数定义组件区别，有私有数据和生命周期")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("class MyComponent extends React.Component{\n\tconstructor(){\n\t\tsuper()\n\t\tthis.state={\n\t\t\tcount:0\n\t\t}\n\t}\n\trender(){\n\t\treturn <div>我是组件1</div>\n\t}\n}\n")])])]),a("h2",{attrs:{id:"props"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#props","aria-hidden":"true"}},[t._v("#")]),t._v(" props")]),t._v(" "),a("ul",[a("li",[t._v("函数组件")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("function MyComponent(props){\n\treturn <div>{props.person.name}</div>\n}\nlet person={\n    name:'小明',\n    age:'5岁'\n}\nlet dom = <MyComponent person={person}></MyComponent>\n")])])]),a("ul",[a("li",[t._v("class组件")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("class MyComponent extends React.Component{\n\trender(){\n\t\treturn <div>{person.name}</div>\n\t\t//return <div>{this.props.person.name}</div>\n\t}\n}\nlet person={\n    name:'小明',\n    age:'5岁'\n}\nlet dom = <MyComponent person={person}></MyComponent>\n")])])]),a("h2",{attrs:{id:"state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state","aria-hidden":"true"}},[t._v("#")]),t._v(" state")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("class MyComponent extends React.Component{\n    constructor(){\n        super();\n        this.state={\n             person:'小明'\n        }\n    }\n}\n\n")])])]),a("ul",[a("li",[t._v("setState")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("this.setState((state, props) => ({\n  counter: state.counter + props.increment\n}));\n")])])]),a("h2",{attrs:{id:"style"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#style","aria-hidden":"true"}},[t._v("#")]),t._v(" Style")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" <h1 style={{color:'red'}}>评论区列表</h1>\n")])])]),a("h2",{attrs:{id:"css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css","aria-hidden":"true"}},[t._v("#")]),t._v(" CSS")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(' <h1 className="color-red">评论区列表</h1>\n')])])]),a("h2",{attrs:{id:"事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件","aria-hidden":"true"}},[t._v("#")]),t._v(" 事件")]),t._v(" "),a("p",[t._v("class fields")]),t._v(" "),a("blockquote",[a("p",[t._v("绑定this")])]),t._v(" "),a("ul",[a("li",[t._v("安装")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install --save-dev @babel/plugin-proposal-class-properties\n")])])]),a("ul",[a("li",[t._v("配置")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('//.babelrc\n{\n  "plugins": ["@babel/plugin-proposal-class-properties"]\n}\n')])])]),a("ul",[a("li",[t._v("用法")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("class MyComponent extends React.Component{\n\thandleClick = () => {\n   \t\t console.log('this is:', this);\n  \t}\n}\n")])])]),a("p",[t._v("传参")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<button onClick={(e) => this.deleteRow(id, e)}>Delete Row</button>\n")])])]),a("h2",{attrs:{id:"表单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#表单","aria-hidden":"true"}},[t._v("#")]),t._v(" 表单")]),t._v(" "),a("h4",{attrs:{id:"受控组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#受控组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 受控组件")]),t._v(" "),a("blockquote",[a("p",[t._v("input绑定state")])]),t._v(" "),a("div",{staticClass:"language-react extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("class MyComponent extends React.Component{\n    constructor() {\n        this.state = {\n            count: 0,\n        }\n    }\n    change = (e) => {\n       this.setState(()=>({\n            count:e.target.value\n        }))\n    }\n    render() {\n        return <div>\n            <input\n           onChange={this.change}\n           value={this.state.count}/>\n </div>}\n}\n")])])]),a("h4",{attrs:{id:"非受控组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#非受控组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 非受控组件")]),t._v(" "),a("h2",{attrs:{id:"生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生命周期","aria-hidden":"true"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),a("blockquote",[a("p",[t._v("组件实例，从创建、运行、销毁\t会触发一系列事件，这些事件叫做组件的生命周期函数")])]),t._v(" "),a("h3",{attrs:{id:"挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载","aria-hidden":"true"}},[t._v("#")]),t._v(" 挂载")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("constructor")]),t._v(" "),a("blockquote",[a("ul",[a("li",[t._v("通过给 "),a("code",[t._v("this.state")]),t._v(" 赋值对象来初始化内部 state。")])])])]),t._v(" "),a("li",[a("p",[t._v("static getDerivedStateFromProps")])]),t._v(" "),a("li",[a("p",[t._v("render")])]),t._v(" "),a("li",[a("p",[t._v("componentDidMount")]),t._v(" "),a("blockquote",[a("p",[t._v("组件挂载后（插入 DOM 树中）调用")])])])]),t._v(" "),a("h3",{attrs:{id:"更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新","aria-hidden":"true"}},[t._v("#")]),t._v(" 更新")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("static "),a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/react-component.html#static-getderivedstatefromprops",target:"_blank",rel:"noopener noreferrer"}},[t._v("getDerivedStateFromProps"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("在调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用。")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/optimizing-performance.html#shouldcomponentupdate-in-action",target:"_blank",rel:"noopener noreferrer"}},[t._v("shouldComponentUpdate"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("根据返回值判断是否重新渲染页面")])])]),t._v(" "),a("li",[a("p",[t._v("render")])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/react-component.html#getsnapshotbeforeupdate",target:"_blank",rel:"noopener noreferrer"}},[t._v("getSnapshotBeforeUpdate"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("在最近一次渲染输出（提交到 DOM 节点）之前调用")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/react-component.html#componentdidupdate",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentDidUpdate"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("更新后调用。首次渲染不会执行此方法。")])])])]),t._v(" "),a("h3",{attrs:{id:"卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载","aria-hidden":"true"}},[t._v("#")]),t._v(" 卸载")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/react-component.html#componentwillunmount",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentWillUnmount"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("组件卸载及销毁之前直接调用")])])])]),t._v(" "),a("h3",{attrs:{id:"错误处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误处理","aria-hidden":"true"}},[t._v("#")]),t._v(" 错误处理")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("static "),a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/react-component.html#static-getderivedstatefromerror",target:"_blank",rel:"noopener noreferrer"}},[t._v("getDerivedStateFromError"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("此生命周期会在后代组件抛出错误后被调用。")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/react-component.html#componentdidcatch",target:"_blank",rel:"noopener noreferrer"}},[t._v("componentDidCatch"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("此生命周期在后代组件抛出错误后被调用")])])])]),t._v(" "),a("h2",{attrs:{id:"组合-继承"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组合-继承","aria-hidden":"true"}},[t._v("#")]),t._v(" 组合&继承")]),t._v(" "),a("blockquote",[a("p",[t._v("接收父组件未知子节点，并在子组件指定位子渲染")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("//parent\nrender(){\n\treturn <MyComponent>\n\t\t<div>我在子组件中被渲染</div>\n\t</MyComponent>\n}\n//child\nrender(){\n\treturn <div>\n\t{this.props.children}\n\t</div> \n}\n")])])]),a("p",[t._v("跨域")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// `package.json`\n"proxy": "http://localhost:4000"\n')])])]),a("h2",{attrs:{id:"context"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/context.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Context"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("创建")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const MyContext = React.createContext(defaultValue);\n")])])]),a("ul",[a("li",[a("p",[t._v("<Provider>")]),t._v(" "),a("blockquote",[a("p",[t._v("传值")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const MyContext = React.createContext(defaultValue);\n<MyContext.provider value={/* 某个值 */}>\n")])])]),a("ul",[a("li",[a("p",[t._v("contextType")]),t._v(" "),a("blockquote",[a("p",[t._v("接收 provide")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import MyContext form './MyContext'\nclass MyClass extends React.Component {\n  render() {\n    let value = this.context;\n    /* 基于这个值进行渲染工作 */\n  }\n}\nMyClass.contextType = MyContext;\n\n//public class fields语法\nclass MyClass extends React.Component {\n  static contextType = MyContext;\n  render() {\n    let value = this.context;\n    /* 基于这个值进行渲染工作 */\n  }\n}\n")])])]),a("ul",[a("li",[a("p",[t._v("Consumer")]),t._v(" "),a("blockquote",[a("p",[t._v("子组件为function，接收 provide")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const MyContext = React.createContext(defaultValue);\n\n\nfunction Index(props) {\n    return (\n\t\t<ThemeContext.Consumer>\n\t\t{value => (<div>{value.contextValue}</div>)}\n \t\t</ThemeContext.Consumer>\n \t\t)\n}\n//value === this.context\n")])])]),a("h2",{attrs:{id:"错误边界"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误边界","aria-hidden":"true"}},[t._v("#")]),t._v(" 错误边界")]),t._v(" "),a("p",[t._v("static getDerivedStateFromError")]),t._v(" "),a("blockquote",[a("p",[t._v("此生命周期会在后代组件抛出错误后被调用。 它将抛出的错误作为参数，并返回一个值以更新 state")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    static getDerivedStateFromError(error) {\n        // 更新 state 使下一次渲染能够显示降级后的 UI\n        return { hasError: true,a:'wwww' };\n    }\n\n")])])]),a("p",[t._v("componentDidCatch()")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("componentDidCatch()")]),t._v(" 会在“提交”阶段被调用，因此允许执行副作用。 它应该用于记录错误之类的情况")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    componentDidCatch(error, errorInfo) {\n        // 你同样可以将错误日志上报给服务器\n        console.log(error, errorInfo);\n    }\n")])])]),a("h2",{attrs:{id:"refs-转发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#refs-转发","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/forwarding-refs.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Refs 转发"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[a("p",[t._v("React.forwardRef")]),t._v(" "),a("blockquote",[a("p",[t._v("允许组件接收ref并且转发给子组件")])])])]),t._v(" "),a("h2",{attrs:{id:"fragments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fragments","aria-hidden":"true"}},[t._v("#")]),t._v(" Fragments")]),t._v(" "),a("blockquote",[a("p",[t._v("同Vue template，Fragments 允许你将子列表分组，而无需向 DOM 添加额外节点。")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<React.Fragment>\n    <td>Hello</td>\n</React.Fragment>\n//短语法\n<>\n\t<td>Hello</td>\n</>\n")])])]),a("h2",{attrs:{id:"高阶组件（hoc）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高阶组件（hoc）","aria-hidden":"true"}},[t._v("#")]),t._v(" 高阶组件（HOC）")]),t._v(" "),a("h2",{attrs:{id:"hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hook","aria-hidden":"true"}},[t._v("#")]),t._v(" Hook")]),t._v(" "),a("h2",{attrs:{id:"redux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux","aria-hidden":"true"}},[t._v("#")]),t._v(" redux")]),t._v(" "),a("ul",[a("li",[t._v("安装")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install --save react-redux\nnpm install --save-dev redux-devtools //调试工具\n")])])]),a("p",[t._v("配置 redux-devtools")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const store=createStore(reducer,window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n")])])]),a("p",[t._v("store")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import {createStore} from 'redux'\nimport reducer from './reducer'\nconst store=createStore(reducer,window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\nexport default  store\n")])])]),a("ul",[a("li",[a("p",[t._v("getState")]),t._v(" "),a("blockquote",[a("p",[t._v("读值")])])]),t._v(" "),a("li",[a("p",[t._v("subscribe")]),t._v(" "),a("blockquote",[a("p",[t._v("store改变时触发函数")])])]),t._v(" "),a("li",[a("p",[t._v("setState")]),t._v(" "),a("blockquote",[a("p",[t._v("subscribe触发函数,调用setState更新视图")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    constructor(props){\n        super(props)\n        this.state=store.getState()\n        store.subscribe(this.changeStore)\n    }\n\tchangeStore=()=>{\n        this.setState(store.getState())\n    }\n")])])]),a("p",[t._v("reducer")]),t._v(" "),a("blockquote",[a("p",[t._v("接收旧的 state 和 action，返回新的 state")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const defaultState = {\n    person:{\n        name:'K',\n        age:'24'\n    }\n}\nexport default (state = defaultState,action)=>{\n    return state\n}\n")])])]),a("p",[t._v("action*")]),t._v(" "),a("p",[a("em",[t._v("reducer")])]),t._v(" "),a("p",[t._v("::: warn")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("store唯一")])]),t._v(" "),a("li",[a("p",[t._v("store接收reducer返回的新state并改变")])]),t._v(" "),a("li",[a("p",[t._v("reducer里必须为纯函数，"),a("strong",[t._v("只要传入参数相同，返回计算得到的下一个 state 就一定相同。")])]),t._v(" "),a("p",[a("strong",[t._v("永远不要")]),t._v("在 reducer 里做这些操作：")]),t._v(" "),a("ul",[a("li",[t._v("修改传入参数；")]),t._v(" "),a("li",[t._v("执行有副作用的操作，如 API 请求和路由跳转；")]),t._v(" "),a("li",[t._v("调用非纯函数，如 "),a("code",[t._v("Date.now()")]),t._v(" 或 "),a("code",[t._v("Math.random()")]),t._v("。")])])])])])},[],!1,null,null,null);e.default=s.exports}}]);